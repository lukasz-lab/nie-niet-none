"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ConvertDocumentParserAPIVersion = void 0;
const parserapiv1_1 = require("parserapiv1");
const parserapiv2_1 = require("parserapiv2");
const parserapiv3_1 = require("parserapiv3");
function ConvertDocumentParserAPIVersion(doc, toParserAPIMajorVersion) {
    var _a;
    if (!doc || !doc.json)
        return doc;
    const docParserAPI = (_a = doc.extensions().get('x-parser-api-version')) === null || _a === void 0 ? void 0 : _a.value();
    const docParserAPIMajorVersion = docParserAPI || 0;
    if (docParserAPIMajorVersion === toParserAPIMajorVersion) {
        return doc; // Nothing to do
    }
    const detailedAsyncAPI = doc.meta().asyncapi;
    switch (toParserAPIMajorVersion) {
        case 1:
            return (0, parserapiv1_1.createAsyncAPIDocument)(detailedAsyncAPI);
        case 2:
            return (0, parserapiv2_1.createAsyncAPIDocument)(detailedAsyncAPI);
        case 3:
            return (0, parserapiv3_1.createAsyncAPIDocument)(detailedAsyncAPI);
        default:
            return doc;
    }
}
exports.ConvertDocumentParserAPIVersion = ConvertDocumentParserAPIVersion;
